<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap 5 Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
          

<storyly-web></storyly-web>


<pre>
  <ul id="logs"></ul>
</pre>
  
<div class="container-fluid p-5 bg-primary text-white text-center">
  <h1>My First Bootstrap Page</h1>
  <p>Resize this responsive page to see the effect!</p> 
</div>
  
<div class="container mt-5">
  <div class="row">
    <div class="col-sm-4">
      <h3>Column 1</h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
    </div>
    <div class="col-sm-4">
      <h3>Column 2</h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
    </div>
    <div class="col-sm-4">
      <h3>Column 3</h3>        
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
    </div>
  </div>
</div>


<script custom-element="storyly-web" src="https://web-story.storyly.io/sdk/3.4.4/storyly-web.js"></script> 
              <storyly-web></storyly-web>
              <script>
                  function log(eventName, data) {
                    const ul = document.getElementById('logs');
                    const li = document.createElement('li');
                    if (data && data.stories && data.stories.length) data.stories = data.stories.length;
                    li.textContent = `*${eventName}* - ${JSON.stringify(data)}`;
                    
                    ul.appendChild(li);
                  }
                
                  const storylyWeb = document.querySelector('storyly-web');

                  const userPropertyData = {
                    '{user_fullname}': 'ישראל ישראלי',
                    '{user_loan_amount}': 12345
                  };
                
                  storylyWeb.init({
                    token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NfaWQiOjEyMDc2LCJhcHBfaWQiOjE3ODc5LCJpbnNfaWQiOjE5OTcxfQ.G82QrpEWjU_qZiz8ZZG1UgmXCIQAy21eCxyuRva6Q5M"
                  });

                  storylyWeb.setUserPropertiesData(userPropertyData);

                storylyWeb.on('userEvent', (data) => {
                	console.log(data);
                });
                
                storylyWeb.on('actionClicked', (story) => {
                  	console.log('actionClicked', story);
                  });

                  storylyWeb.on('storyViewed', (story) => {
                    // {
                    //   group: groupData,
                    //   story_id: Number,
                    //   media: URL,
                    //   index: Number,
                    // }
                    const {group,story_id,media,index} = story;
                  	console.log('storyViewed', {group,story_id,media,index});
                  });

                  storylyWeb.on('openStoryGroup', (group) => {
                    // {
                    //   group_id: Number,
                    //   icon_image_url: String,
                    //   media_host: String,
                    //   order: Number,
                    //   pinned: Boolean
                    //   stories: Array,
                    //   title: String
                    // }
                    const {group_id,icon_image_url,media_host,order,pinned,title} = group;
                  	console.log('openStoryGroup', {group_id,icon_image_url,media_host,order,pinned,title});
                  });
                 // ['userEvent', 'renderedStoryGroups', 'noStoryGroup', 'openStoryGroup', 'storyOpenFailed', 'closeStoryGroup', 'storyViewed', 'storyGroupViewed', 'nextStory', 'previousStory', 'nextStoryGroup', 'previousStoryGroup', 'productTagExpanded', 'productTagClicked'].forEach(eventKey => {
                 //    storylyWeb.on(eventKey, (data) => {
                 //      log(eventKey, data);
                 //    });
                 // });
                 
              </script>
</body>
</html>
